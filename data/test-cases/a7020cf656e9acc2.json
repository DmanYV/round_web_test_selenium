{"uid":"a7020cf656e9acc2","name":"Проверка удаления аккаунта по причине \"У меня есть другой профиль в ROUND!\"","fullName":"tests.test_editing_profile.TestEditingProfile#test_deletion_of_account","historyId":"08a85c3a4a678501252010147013343b","time":{"start":1737842241627,"stop":1737842241627,"duration":0},"description":"Сначала регистрируется новый пользователь, после удаляется по причине и проверяется, что при авторизации ему отображается уведомление","descriptionHtml":"<p>Сначала регистрируется новый пользователь, после удаляется по причине и проверяется, что при авторизации ему отображается уведомление</p>\n","status":"broken","statusMessage":"selenium.common.exceptions.TimeoutException: Message:","statusTrace":"driver = <selenium.webdriver.chrome.webdriver.WebDriver (session=\"e8bad4f5dd6e678516533610403b7ecc\")>\ndb_connection = <psycopg.Connection [INTRANS] (host=rc1a-8gbxfgy3ifeqz75r.mdb.yandexcloud.net port=6432 user=dyanyshev database=staging_round_confirmation) at 0x7f971f71aab0>\n\n    @pytest.fixture(scope='function')\n    @allure.title('Регистрация пользователя')\n    @allure.step('Регистрация пользователя')\n    def registration_user(driver, db_connection):\n        \"\"\"\n        Фикстура для регистрации нового пользователя в системе.\n    \n        Эта фикстура выполняет полный процесс регистрации нового пользователя,\n        включая заполнение всех необходимых полей и прохождение верификации по SMS.\n    \n        Процесс регистрации:\n        1. Открывает страницу авторизации\n        2. Выбирает регистрацию по SMS\n        3. Генерирует случайный никнейм\n        4. Вводит пароль\n        5. Генерирует случайный номер телефона\n        6. Получает код подтверждения из Database\n        7. Вводит код подтверждения\n        8. Проверяет приветственное сообщение\n        9. Закрывает приветственное видео (если оно есть)\n        10. Пропускает выбор рубрик\n        11. Закрывает окно с предложением листать ленту\n    \n        :param driver: экземпляр WebDriver для управления браузером\n        :param db_connection: экземпляр подключения к базе данных ROUND\n    \n        :return: None\n    \n        Примечание:\n        - Использует faker для генерации случайных данных\n        - Взаимодействует с MetaBase для получения кода подтверждения\n        - Обрабатывает возможные исключения, такие как отсутствие приветственного видео\n        \"\"\"\n        authorization_page = AuthorizationPage(driver)\n        join_page = JoinPage(driver)\n        db = DBRoundConfirmation(driver)\n        assertion = Assertion(driver)\n        rubric_page = RubricPage(driver)\n        main_page = MainPage(driver)\n    \n        # Открываем страницу авторизации и выбираем регистрацию по SMS\n        authorization_page.open()\n        authorization_page.do_click(config.locators.AuthorizationPageLocators.locators['Кнопка по смс'])\n        join_page.do_click(config.locators.JoinPageLocators.locators['Кнопка далее'])\n    \n        # Генерируем случайный никнейм и вводим его\n        username = f'-{fake.pystr(min_chars=5, max_chars=11)}.{fake.pyint(min_value=1, max_value=2)}_'\n        join_page.field_send_keys(config.locators.JoinPageLocators.locators['Поле никнейм'], text=f'{username}')\n        join_page.do_click(config.locators.JoinPageLocators.locators['Кнопка далее'])\n    \n        # Вводим пароль и подтверждаем его\n        join_page.field_send_keys(config.locators.JoinPageLocators.locators['Поле пароль'], text=User.PASSWORD)\n        join_page.field_send_keys(config.locators.JoinPageLocators.locators['Поле повтори пароль'], text=User.PASSWORD)\n        join_page.do_click(config.locators.JoinPageLocators.locators['Кнопка далее'])\n    \n        # Генерируем случайный номер телефона и вводим его\n        phone_number = fake.random_number(digits=10, fix_len=True)\n        join_page.field_send_keys(config.locators.JoinPageLocators.locators['Поле номер телефона'], text=phone_number)\n        join_page.do_click(config.locators.JoinPageLocators.locators['Кнопка далее'])\n    \n        # Получаем код подтверждения из MetaBase и вводим его\n        sms_code = db.get_last_sms_code(connection=db_connection)\n        join_page.field_send_keys(config.locators.JoinPageLocators.locators['Поле проверочный код'], text=sms_code)\n    \n        # Проверяем приветственное сообщение и нажимаем кнопку \"Погнали\"\n>       assertion.text_in_element(config.locators.JoinPageLocators.locators['Текст приветствия пользователя'],\n                                  expected_text=f'Привет, {username[:16]}\\nДобро пожаловать в Round!')\n\nfixtures/fixtures_for_registration_tests.py:84: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nbase/base_assertion.py:26: in text_in_element\n    element = WebDriverWait(self.driver, timeout).until(\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <selenium.webdriver.support.wait.WebDriverWait (session=\"e8bad4f5dd6e678516533610403b7ecc\")>\nmethod = <function presence_of_element_located.<locals>._predicate at 0x7f9720607e20>\nmessage = ''\n\n    def until(self, method: Callable[[D], Union[Literal[False], T]], message: str = \"\") -> T:\n        \"\"\"Calls the method provided with the driver as an argument until the \\\n        return value does not evaluate to ``False``.\n    \n        :param method: callable(WebDriver)\n        :param message: optional message for :exc:`TimeoutException`\n        :returns: the result of the last call to `method`\n        :raises: :exc:`selenium.common.exceptions.TimeoutException` if timeout occurs\n        \"\"\"\n        screen = None\n        stacktrace = None\n    \n        end_time = time.monotonic() + self._timeout\n        while True:\n            try:\n                value = method(self._driver)\n                if value:\n                    return value\n            except self._ignored_exceptions as exc:\n                screen = getattr(exc, \"screen\", None)\n                stacktrace = getattr(exc, \"stacktrace\", None)\n            if time.monotonic() > end_time:\n                break\n            time.sleep(self._poll)\n>       raise TimeoutException(message, screen, stacktrace)\nE       selenium.common.exceptions.TimeoutException: Message:\n\n../local/lib/python3.12/site-packages/selenium/webdriver/support/wait.py:105: TimeoutException","flaky":false,"newFailed":false,"newBroken":true,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_session_faker","time":{"start":1737841715019,"stop":1737841715020,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"stepsCount":0,"hasContent":false},{"name":"Установка соединения с БД","time":{"start":1737842241628,"stop":1737842242393,"duration":765},"status":"passed","steps":[{"name":"Установка соединения с БД","time":{"start":1737842241628,"stop":1737842242393,"duration":765},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"request","value":"<SubRequest 'db_connection' for <Function test_deletion_of_account[У меня есть другой профиль в ROUND!]>>"}],"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"stepsCount":0,"hasContent":true}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"stepsCount":1,"hasContent":true},{"name":"driver","time":{"start":1737842242393,"stop":1737842242803,"duration":410},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"stepsCount":0,"hasContent":false},{"name":"setup","time":{"start":1737842242803,"stop":1737842242803,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"stepsCount":0,"hasContent":false},{"name":"Инициализация локаторов","time":{"start":1737842242803,"stop":1737842242803,"duration":0},"status":"passed","steps":[{"name":"Инициализация локаторов","time":{"start":1737842242803,"stop":1737842242803,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"request","value":"<SubRequest 'elements' for <Function test_deletion_of_account[У меня есть другой профиль в ROUND!]>>"}],"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"stepsCount":0,"hasContent":true}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"stepsCount":1,"hasContent":true},{"name":"Регистрация пользователя","time":{"start":1737842242804,"stop":1737842264545,"duration":21741},"status":"broken","statusMessage":"selenium.common.exceptions.TimeoutException: Message: \n\n","statusTrace":"  File \"/usr/local/lib/python3.12/site-packages/pluggy/_callers.py\", line 167, in _multicall\n    teardown.throw(outcome._exception)\n  File \"/usr/local/lib/python3.12/site-packages/_pytest/setuponly.py\", line 36, in pytest_fixture_setup\n    return (yield)\n            ^^^^^\n  File \"/usr/local/lib/python3.12/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/site-packages/_pytest/fixtures.py\", line 1140, in pytest_fixture_setup\n    result = call_fixture_func(fixturefunc, request, kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/site-packages/_pytest/fixtures.py\", line 898, in call_fixture_func\n    fixture_result = fixturefunc(**kwargs)\n                     ^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/usr/workspace/fixtures/fixtures_for_registration_tests.py\", line 84, in registration_user\n    assertion.text_in_element(config.locators.JoinPageLocators.locators['Текст приветствия пользователя'],\n  File \"/usr/workspace/base/base_assertion.py\", line 26, in text_in_element\n    element = WebDriverWait(self.driver, timeout).until(\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/site-packages/selenium/webdriver/support/wait.py\", line 105, in until\n    raise TimeoutException(message, screen, stacktrace)\n","steps":[{"name":"Регистрация пользователя","time":{"start":1737842242804,"stop":1737842264544,"duration":21740},"status":"broken","statusMessage":"selenium.common.exceptions.TimeoutException: Message: \n\n","statusTrace":"  File \"/usr/local/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/usr/workspace/fixtures/fixtures_for_registration_tests.py\", line 84, in registration_user\n    assertion.text_in_element(config.locators.JoinPageLocators.locators['Текст приветствия пользователя'],\n  File \"/usr/workspace/base/base_assertion.py\", line 26, in text_in_element\n    element = WebDriverWait(self.driver, timeout).until(\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/site-packages/selenium/webdriver/support/wait.py\", line 105, in until\n    raise TimeoutException(message, screen, stacktrace)\n","steps":[],"attachments":[],"parameters":[{"name":"driver","value":"<selenium.webdriver.chrome.webdriver.WebDriver (session=\"e8bad4f5dd6e678516533610403b7ecc\")>"},{"name":"db_connection","value":"<psycopg.Connection [IDLE] (host=rc1a-8gbxfgy3ifeqz75r.mdb.yandexcloud.net port=6432 user=dyanyshev database=staging_round_confirmation) at 0x7f971f71aab0>"}],"shouldDisplayMessage":true,"attachmentsCount":0,"attachmentStep":false,"stepsCount":0,"hasContent":true}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"stepsCount":1,"hasContent":true}],"afterStages":[{"name":"driver::0","time":{"start":1737842264558,"stop":1737842264748,"duration":190},"status":"passed","steps":[],"attachments":[{"uid":"8ea3ec9f37e9a69a","name":"page_source","source":"8ea3ec9f37e9a69a.html","type":"text/html","size":6709},{"uid":"7df7a52ee687dbde","name":"screenshot","source":"7df7a52ee687dbde.png","type":"image/png","size":23333},{"uid":"61133bc1981262f3","name":"browser_logs","source":"61133bc1981262f3.txt","type":"text/plain","size":2734}],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":3,"attachmentStep":false,"stepsCount":0,"hasContent":true},{"name":"Установка соединения с БД::fin","time":{"start":1737842539342,"stop":1737842539342,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"stepsCount":0,"hasContent":false}],"labels":[{"name":"feature","value":"Редактирование профиля"},{"name":"severity","value":"Critical"},{"name":"tag","value":"regression"},{"name":"tag","value":"editing_profile"},{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_editing_profile"},{"name":"subSuite","value":"TestEditingProfile"},{"name":"host","value":"7eeac2dca580"},{"name":"thread","value":"1-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_editing_profile"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"options","value":"'У меня есть другой профиль в ROUND!'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"critical","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":0,"broken":9,"skipped":0,"passed":20,"unknown":0,"total":29},"items":[{"uid":"11d6dcea4314f004","status":"passed","time":{"start":1737831982034,"stop":1737831989398,"duration":7364}},{"uid":"2ddb75d68ede0949","status":"broken","statusDetails":"selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: element is not attached to the page document\n  (Session info: headless chrome=112.0.5615.165); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception","time":{"start":1737799300775,"stop":1737799300775,"duration":0}},{"uid":"2d7da8d77d34e9e5","status":"passed","time":{"start":1737757592036,"stop":1737757599390,"duration":7354}},{"uid":"1ac98d59d37de3f7","status":"passed","time":{"start":1737744551322,"stop":1737744558670,"duration":7348}},{"uid":"8fb635d60ffae5b7","status":"passed","time":{"start":1737652372908,"stop":1737652380302,"duration":7394}},{"uid":"b181da8b3845021d","status":"broken","statusDetails":"selenium.common.exceptions.TimeoutException: Message: Не найден элемент с локатором ('xpath', '//input[@name=\"nickname\"]')","time":{"start":1737569945403,"stop":1737569945403,"duration":0}},{"uid":"dae77c8535d23ce3","status":"broken","statusDetails":"selenium.common.exceptions.WebDriverException: Message: unknown error: Chrome failed to start: exited abnormally.\n  (unknown error: DevToolsActivePort file doesn't exist)\n  (The process started from chrome location /usr/bin/chromium-browser is no longer running, so ChromeDriver is assuming that Chrome has crashed.)","time":{"start":1737568962105,"stop":1737568962105,"duration":0}},{"uid":"f9849ce2ea2fbb05","status":"passed","time":{"start":1734034386188,"stop":1734034393592,"duration":7404}},{"uid":"f892d8e48b4d7eae","status":"passed","time":{"start":1733937093946,"stop":1733937101298,"duration":7352}},{"uid":"68310b1553a3a08d","status":"passed","time":{"start":1733865633513,"stop":1733865640896,"duration":7383}},{"uid":"19426adaea07e99e","status":"passed","time":{"start":1733860071412,"stop":1733860078277,"duration":6865}},{"uid":"3b131d170a9872f","status":"passed","time":{"start":1733856658558,"stop":1733856665470,"duration":6912}},{"uid":"8a93195b58cf3394","status":"passed","time":{"start":1733771547680,"stop":1733771555022,"duration":7342}},{"uid":"c9d75b388f3b5cc5","status":"passed","time":{"start":1733765900714,"stop":1733765908118,"duration":7404}},{"uid":"8882c371dbb6232d","status":"broken","statusDetails":"selenium.common.exceptions.TimeoutException: Message:","time":{"start":1733421598732,"stop":1733421598732,"duration":0}},{"uid":"32c3363ba406f730","status":"broken","statusDetails":"selenium.common.exceptions.TimeoutException: Message:","time":{"start":1726780142323,"stop":1726780142323,"duration":0}},{"uid":"2b73dc3f7b4847a0","status":"broken","statusDetails":"selenium.common.exceptions.TimeoutException: Message:","time":{"start":1726776853218,"stop":1726776853218,"duration":0}},{"uid":"7945bd95274e058","status":"passed","time":{"start":1724098504885,"stop":1724098516688,"duration":11803}},{"uid":"d1c46c1cd580db1f","status":"passed","time":{"start":1723828667760,"stop":1723828677839,"duration":10079}},{"uid":"e0b251f3d443fd54","status":"passed","time":{"start":1723751050730,"stop":1723751061016,"duration":10286}}]},"tags":["editing_profile","regression"]},"source":"a7020cf656e9acc2.json","parameterValues":["'У меня есть другой профиль в ROUND!'"]}