{"uid":"f1d3f9e561a52758","name":"Проверка валидации поля ввода кода из смс при вводе неверного значения","fullName":"tests.test_reset_password.TestResetPassword#test_receiving_sms_code_to_reset_password","historyId":"57bcb3085b34ce1268c6f60bfaf61447","time":{"start":1723150424060,"stop":1723150458827,"duration":34767},"description":"Для восстановления используется номер от Aleska","descriptionHtml":"<p>Для восстановления используется номер от Aleska</p>\n","status":"broken","statusMessage":"selenium.common.exceptions.TimeoutException: Message: Не найден элемент с локатором ('xpath', '//input[@name=\"code\"]')","statusTrace":"self = <test_reset_password.TestResetPassword object at 0x7f0496be18b0>\nelements = {'Банк ачивок': {'Блок ачивок': ('xpath', '//div[contains(@class,\"user-achievement-by-interests_container\")]'), 'Модал...-sheet_icons\")]'), 'Название ачивки': ('xpath', '//div[contains(@class,\"achievement-item-bottom-sheet_title\")]')}, ...}\n\n    @allure.title('Проверка валидации поля ввода кода из смс при вводе неверного значения')\n    @allure.description('Для восстановления используется номер от Aleska')\n    @allure.severity('Critical')\n    @pytest.mark.regression\n    def test_receiving_sms_code_to_reset_password(self, elements):\n        with allure.step('Открыть страницу логина'):\n            self.login_page.open()\n            element = elements['Страница логина']\n    \n        with allure.step('Нажать кнопку забыл пароль'):\n            self.login_page.do_click(element['Кнопка забыл пароль'])\n    \n        with allure.step('В поле \"Email или номер телефона\" ввести номер телефона от Aleska'):\n            element = elements['Страница восстановления пароля']\n            self.reset_password_page.field_send_keys(element['Поле логин'],\n                                                     text=self.User.PHONE)\n    \n        with allure.step('Нажать кнопку \"Сбросить пароль\"'):\n            self.reset_password_page.do_click(element['Кнопка сбросить пароль'])\n    \n        with allure.step('В поле Код из смс ввести смс код'):\n>           self.reset_password_page.field_send_keys(element['Поле код из смс'],\n                                                     text=f'{fake.pyint(min_value=1000, max_value=9999)}')\n\ntests/test_reset_password.py:131: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nbase/base_page.py:127: in field_send_keys\n    element = self.find_element(locator)\nbase/base_page.py:140: in find_element\n    return self.wait.until(EC.visibility_of_element_located(locator),\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <selenium.webdriver.support.wait.WebDriverWait (session=\"27eca141782b57431d90f93b9c6badca\")>\nmethod = <function visibility_of_element_located.<locals>._predicate at 0x7f04939613a0>\nmessage = 'Не найден элемент с локатором (\\'xpath\\', \\'//input[@name=\"code\"]\\')'\n\n    def until(self, method: Callable[[D], Union[Literal[False], T]], message: str = \"\") -> T:\n        \"\"\"Calls the method provided with the driver as an argument until the \\\n        return value does not evaluate to ``False``.\n    \n        :param method: callable(WebDriver)\n        :param message: optional message for :exc:`TimeoutException`\n        :returns: the result of the last call to `method`\n        :raises: :exc:`selenium.common.exceptions.TimeoutException` if timeout occurs\n        \"\"\"\n        screen = None\n        stacktrace = None\n    \n        end_time = time.monotonic() + self._timeout\n        while True:\n            try:\n                value = method(self._driver)\n                if value:\n                    return value\n            except self._ignored_exceptions as exc:\n                screen = getattr(exc, \"screen\", None)\n                stacktrace = getattr(exc, \"stacktrace\", None)\n            time.sleep(self._poll)\n            if time.monotonic() > end_time:\n                break\n>       raise TimeoutException(message, screen, stacktrace)\nE       selenium.common.exceptions.TimeoutException: Message: Не найден элемент с локатором ('xpath', '//input[@name=\"code\"]')\n\n../local/lib/python3.12/site-packages/selenium/webdriver/support/wait.py:105: TimeoutException","flaky":false,"newFailed":false,"newBroken":true,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_session_faker","time":{"start":1723149600427,"stop":1723149600448,"duration":21},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"stepsCount":0,"hasContent":false,"attachmentStep":false},{"name":"driver","time":{"start":1723150423624,"stop":1723150424059,"duration":435},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"stepsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Инициализация локаторов","time":{"start":1723150424059,"stop":1723150424060,"duration":1},"status":"passed","steps":[{"name":"Инициализация локаторов","time":{"start":1723150424060,"stop":1723150424060,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"request","value":"<SubRequest 'elements' for <Function test_receiving_sms_code_to_reset_password>>"}],"shouldDisplayMessage":false,"attachmentsCount":0,"stepsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"stepsCount":1,"hasContent":true,"attachmentStep":false},{"name":"setup","time":{"start":1723150424059,"stop":1723150424059,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"stepsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Для восстановления используется номер от Aleska","status":"broken","statusMessage":"selenium.common.exceptions.TimeoutException: Message: Не найден элемент с локатором ('xpath', '//input[@name=\"code\"]')","statusTrace":"self = <test_reset_password.TestResetPassword object at 0x7f0496be18b0>\nelements = {'Банк ачивок': {'Блок ачивок': ('xpath', '//div[contains(@class,\"user-achievement-by-interests_container\")]'), 'Модал...-sheet_icons\")]'), 'Название ачивки': ('xpath', '//div[contains(@class,\"achievement-item-bottom-sheet_title\")]')}, ...}\n\n    @allure.title('Проверка валидации поля ввода кода из смс при вводе неверного значения')\n    @allure.description('Для восстановления используется номер от Aleska')\n    @allure.severity('Critical')\n    @pytest.mark.regression\n    def test_receiving_sms_code_to_reset_password(self, elements):\n        with allure.step('Открыть страницу логина'):\n            self.login_page.open()\n            element = elements['Страница логина']\n    \n        with allure.step('Нажать кнопку забыл пароль'):\n            self.login_page.do_click(element['Кнопка забыл пароль'])\n    \n        with allure.step('В поле \"Email или номер телефона\" ввести номер телефона от Aleska'):\n            element = elements['Страница восстановления пароля']\n            self.reset_password_page.field_send_keys(element['Поле логин'],\n                                                     text=self.User.PHONE)\n    \n        with allure.step('Нажать кнопку \"Сбросить пароль\"'):\n            self.reset_password_page.do_click(element['Кнопка сбросить пароль'])\n    \n        with allure.step('В поле Код из смс ввести смс код'):\n>           self.reset_password_page.field_send_keys(element['Поле код из смс'],\n                                                     text=f'{fake.pyint(min_value=1000, max_value=9999)}')\n\ntests/test_reset_password.py:131: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nbase/base_page.py:127: in field_send_keys\n    element = self.find_element(locator)\nbase/base_page.py:140: in find_element\n    return self.wait.until(EC.visibility_of_element_located(locator),\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <selenium.webdriver.support.wait.WebDriverWait (session=\"27eca141782b57431d90f93b9c6badca\")>\nmethod = <function visibility_of_element_located.<locals>._predicate at 0x7f04939613a0>\nmessage = 'Не найден элемент с локатором (\\'xpath\\', \\'//input[@name=\"code\"]\\')'\n\n    def until(self, method: Callable[[D], Union[Literal[False], T]], message: str = \"\") -> T:\n        \"\"\"Calls the method provided with the driver as an argument until the \\\n        return value does not evaluate to ``False``.\n    \n        :param method: callable(WebDriver)\n        :param message: optional message for :exc:`TimeoutException`\n        :returns: the result of the last call to `method`\n        :raises: :exc:`selenium.common.exceptions.TimeoutException` if timeout occurs\n        \"\"\"\n        screen = None\n        stacktrace = None\n    \n        end_time = time.monotonic() + self._timeout\n        while True:\n            try:\n                value = method(self._driver)\n                if value:\n                    return value\n            except self._ignored_exceptions as exc:\n                screen = getattr(exc, \"screen\", None)\n                stacktrace = getattr(exc, \"stacktrace\", None)\n            time.sleep(self._poll)\n            if time.monotonic() > end_time:\n                break\n>       raise TimeoutException(message, screen, stacktrace)\nE       selenium.common.exceptions.TimeoutException: Message: Не найден элемент с локатором ('xpath', '//input[@name=\"code\"]')\n\n../local/lib/python3.12/site-packages/selenium/webdriver/support/wait.py:105: TimeoutException","steps":[{"name":"Открыть страницу логина","time":{"start":1723150424060,"stop":1723150425941,"duration":1881},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"stepsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Нажать кнопку забыл пароль","time":{"start":1723150425941,"stop":1723150427095,"duration":1154},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"stepsCount":0,"hasContent":false,"attachmentStep":false},{"name":"В поле \"Email или номер телефона\" ввести номер телефона от Aleska","time":{"start":1723150427096,"stop":1723150428669,"duration":1573},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"stepsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Нажать кнопку \"Сбросить пароль\"","time":{"start":1723150428669,"stop":1723150428711,"duration":42},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"stepsCount":0,"hasContent":false,"attachmentStep":false},{"name":"В поле Код из смс ввести смс код","time":{"start":1723150428711,"stop":1723150458826,"duration":30115},"status":"broken","statusMessage":"selenium.common.exceptions.TimeoutException: Message: Не найден элемент с локатором ('xpath', '//input[@name=\"code\"]')\n\n","statusTrace":"  File \"/usr/workspace/tests/test_reset_password.py\", line 131, in test_receiving_sms_code_to_reset_password\n    self.reset_password_page.field_send_keys(element['Поле код из смс'],\n  File \"/usr/workspace/base/base_page.py\", line 127, in field_send_keys\n    element = self.find_element(locator)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/workspace/base/base_page.py\", line 140, in find_element\n    return self.wait.until(EC.visibility_of_element_located(locator),\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/site-packages/selenium/webdriver/support/wait.py\", line 105, in until\n    raise TimeoutException(message, screen, stacktrace)\n","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"attachmentsCount":0,"stepsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"attachmentsCount":0,"stepsCount":5,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"driver::0","time":{"start":1723150458874,"stop":1723150459071,"duration":197},"status":"passed","steps":[],"attachments":[{"uid":"2bebe727813b4a0c","name":"page_source","source":"2bebe727813b4a0c.html","type":"text/html","size":17573},{"uid":"1e6ef4867fb438e1","name":"screenshot","source":"1e6ef4867fb438e1.png","type":"image/png","size":31715},{"uid":"37dfd7a7e1a8a20a","name":"browser_logs","source":"37dfd7a7e1a8a20a.txt","type":"text/plain","size":2443}],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":3,"stepsCount":0,"hasContent":true,"attachmentStep":false}],"labels":[{"name":"severity","value":"Critical"},{"name":"feature","value":"Восстановление пароля"},{"name":"tag","value":"regression"},{"name":"tag","value":"reset_password"},{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_reset_password"},{"name":"subSuite","value":"TestResetPassword"},{"name":"host","value":"49f27de1452d"},{"name":"thread","value":"1-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_reset_password"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"critical","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":1,"broken":3,"skipped":0,"passed":15,"unknown":0,"total":19},"items":[{"uid":"909951c32664433d","status":"passed","time":{"start":1723149107041,"stop":1723149114121,"duration":7080}},{"uid":"7abd54559681832c","status":"passed","time":{"start":1723147347866,"stop":1723147354887,"duration":7021}},{"uid":"22848ffe5622d2f1","status":"passed","time":{"start":1723065601184,"stop":1723065608372,"duration":7188}},{"uid":"85eed3cacf8c80a6","status":"passed","time":{"start":1722977169417,"stop":1722977176889,"duration":7472}},{"uid":"419958895c4b97a0","status":"passed","time":{"start":1722892394308,"stop":1722892402076,"duration":7768}},{"uid":"c7cd30c0450c04b2","status":"broken","statusDetails":"selenium.common.exceptions.TimeoutException: Message: Не найден элемент с локатором ('xpath', '//input[@name=\"code\"]')","time":{"start":1722626065514,"stop":1722626100612,"duration":35098}},{"uid":"c89239a27d295157","status":"passed","time":{"start":1722546707615,"stop":1722546714735,"duration":7120}},{"uid":"968ba268c26d0ad4","status":"passed","time":{"start":1722370489261,"stop":1722370497409,"duration":8148}},{"uid":"658e9ecd6efeea68","status":"passed","time":{"start":1722283521925,"stop":1722283530007,"duration":8082}},{"uid":"b2346867575e16f9","status":"passed","time":{"start":1722018520447,"stop":1722018529124,"duration":8677}},{"uid":"2b39d9c88ba5ed1e","status":"passed","time":{"start":1721942901031,"stop":1721942910968,"duration":9937}},{"uid":"c6616b15d7b6aa97","status":"passed","time":{"start":1721851040418,"stop":1721851048353,"duration":7935}},{"uid":"fcee2cfe956ae836","status":"passed","time":{"start":1721683376011,"stop":1721683384758,"duration":8747}},{"uid":"c33f598aff5701ee","status":"passed","time":{"start":1721671981441,"stop":1721671989767,"duration":8326}},{"uid":"dcc13a8e2dc38b75","status":"passed","time":{"start":1721668819419,"stop":1721668827427,"duration":8008}},{"uid":"efa356804e68788a","status":"passed","time":{"start":1720803037684,"stop":1720803047443,"duration":9759}},{"uid":"ad062c4095dc3745","status":"failed","statusDetails":"AssertionError: Ожидался текст: 'Код введен неверно', отображается текс: 'Неверный код подтверждения'","time":{"start":1720800734790,"stop":1720800742749,"duration":7959}},{"uid":"73e8576e4ce62172","status":"broken","statusDetails":"selenium.common.exceptions.TimeoutException: Message: Не найден элемент с локатором ('xpath', '//label[@class=\"phone-screen_confirm-error__q-TwZ\"]')","time":{"start":1720730397248,"stop":1720730434429,"duration":37181}}]},"tags":["regression","reset_password"]},"source":"f1d3f9e561a52758.json","parameterValues":[]}